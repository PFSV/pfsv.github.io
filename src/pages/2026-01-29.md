korail report generation
* 코레일 온프레미스에 적용 완료 
- 백엔드랑 붙는거 해야함(내일 내일모레 개발된다함)  -> 고정값으로 하책임이 테스트 할 수 있게 해준다고 함
    - reference_data_pdf : {"title":"text","title2","text2", ...} # key-value style
        text_data_txt : [text1, text2, ...] # array
        report_info : {
            id : 1,
            detail_list : [
                {"id":1,
                "report_id": text,
                "category"},
                ...
            ]
        }
    -> 여차저차 했는데 지금 스테이트부터 길이 관련까지 문제가 많음
	=> [이사님] 값이 가변적으로 바뀌어야하고, concaternate로 내용 추가해서 전체 포맷 설정 후 제공
	=> 톤&매너, 강조 포인트 등의 예시 Instruction은 선 작성 후 검토( 클릭 -> 이후 매핑 테이블 기반 프롬프트로 바뀌게) =>  페르소나 적용하는거 추가해야함 => ppt에 있는 내용으로 우선 추가해놓기
	

- response는 answer: str, SSE 방식으로 해서 classify, generate, output 단계에서 상태값 전달 (langraph SSE 변환 -> requery 코드 참조)

 

* 사규내규 검색시스템(Airail)
 - 토피컬 가드레일 부착 - 25% 중 17% 약 2%정도의 non-related question 을 오답이 아니라 Nan으로 바꾸려고 함 
 - unrelated question : 0, 보통 질문 :1 로 topical guardrail 설정 
    ->  unrelated question은 korail 서버에 있음, 코드 넣어서 테스트 해보기
    -> 김상진 이사님께 unrelated questions, normal questions 세트 좀 달라고 하고, 페르소나 관련 이야기도 ㄱ
* vllm 2,3 GPU cache 안 쓰고있음 -> context length 이슈로 보임 (vram not enough)
-> max context length 13k -> 7k로 내림, gpu cache usage 올라갔으나 2%대, generation TPS 200대 
